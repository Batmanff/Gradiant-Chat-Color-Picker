<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<title>Gradient Text Generator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
body {
  font-family: Arial, sans-serif;
  background: #0f0f14;
  color: #ffffff;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  margin: 0;
}

.container {
  background: #1b1b24;
  padding: 24px;
  border-radius: 12px;
  width: 100%;
  max-width: 700px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.4);
}

h1 { text-align: center; margin-top: 0; }

textarea, input[type="number"] {
  width: 100%;
  background: #0f0f14;
  color: #fff;
  border: 1px solid #333;
  border-radius: 8px;
  padding: 10px;
  font-size: 16px;
}

textarea { resize: vertical; }

.colors {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin: 12px 0;
}

.colors input[type="color"] { display: none; }

.color-btn {
  width: 70px;
  height: 40px;
  border-radius: 8px;
  border: 2px solid #555;
  cursor: pointer;
  font-family: monospace;
  font-size: 12px;
  color: #fff;
  text-align: center;
  line-height: 40px;
  text-shadow:
    -1px -1px 0 #000,
     1px -1px 0 #000,
    -1px  1px 0 #000,
     1px  1px 0 #000;
}

.controls {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  margin-bottom: 12px;
}

button {
  padding: 12px;
  font-size: 16px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: bold;
}

.linear-btn {
  background: linear-gradient(to bottom right, #2e0980, #290e4a);
  color: #fff;
  flex: 1;
}

.toggle-btn {
  background: linear-gradient(to bottom right, #444, #222);
  color: #fff;
  width: 100%;
}

.rainbow-btn {
  background: linear-gradient(90deg, red, orange, yellow, green, cyan, blue, violet);
  color: #000;
  width: 100%;
  margin-top: 12px;
}

.output textarea {
  min-height: 120px;
  font-family: monospace;
  margin-top: 12px;
}
</style>
</head>
<body>

<div class="container">
<h1>Gradient Text Generator</h1>

<textarea id="input" rows="3" placeholder="Text hier eingeben..."></textarea>

<div class="colors" id="colorPickers"></div>

<div class="controls">
  <button onclick="addColor()" class="linear-btn">Farbe hinzufügen</button>
  <button onclick="removeColor()" class="linear-btn">Farbe löschen</button>
</div>

<input type="number" id="step" min="1" value="1"
placeholder="Farbabstand (1 = jeder Buchstabe)" oninput="generate()">

<button onclick="toggleBold()" id="toggleBtn" class="toggle-btn">&l AN</button>
<button onclick="generate()" class="rainbow-btn">Verlauf erstellen</button>

<div class="output">
  <textarea id="output" placeholder="Fertiger Text zum Kopieren..."></textarea>
</div>
</div>

<script>
const pickerContainer = document.getElementById('colorPickers');
const input = document.getElementById('input');
const output = document.getElementById('output');
const stepInput = document.getElementById('step');
const toggleBtn = document.getElementById('toggleBtn');

const defaultColors = ['#00D2FF', '#FFFFFF'];
let useBold = true;

function createPickers() {
  pickerContainer.innerHTML = '';
  defaultColors.forEach(c => addPicker(c));
}

function addPicker(color) {
  if (pickerContainer.children.length >= 10) return;

  const wrapper = document.createElement('div');
  const inputColor = document.createElement('input');
  inputColor.type = 'color';
  inputColor.value = color;

  const btn = document.createElement('div');
  btn.className = 'color-btn';
  btn.style.background = color;
  btn.textContent = color.toUpperCase();

  btn.onclick = () => inputColor.click();
  inputColor.oninput = () => {
    btn.style.background = inputColor.value;
    btn.textContent = inputColor.value.toUpperCase();
    generate();
  };

  wrapper.appendChild(inputColor);
  wrapper.appendChild(btn);
  pickerContainer.appendChild(wrapper);
}

function addColor(){ addPicker('#FFFFFF'); generate(); }
function removeColor(){
  if (pickerContainer.children.length <= 2) return;
  pickerContainer.removeChild(pickerContainer.lastChild);
  generate();
}

function toggleBold(){
  useBold = !useBold;
  toggleBtn.innerHTML = useBold ? '&l AN' : '&l AUS';
  generate();
}

createPickers();

function lerp(a,b,t){ return a+(b-a)*t; }
function hexToRgb(hex){
  const n=parseInt(hex.slice(1),16);
  return[(n>>16)&255,(n>>8)&255,n&255];
}
function toHex(v){
  return Math.round(v).toString(16).padStart(2,'0').toUpperCase();
}

function generate(){
  const text = input.value;
  const step = Math.max(1, parseInt(stepInput.value) || 1);
  const chars = [...text].filter(c => c !== ' ');
  const colors = [...pickerContainer.querySelectorAll('input')].map(i => i.value);
  if (colors.length < 2) return;

  let result = '';
  let colorIndex = 0;
  let count = 0;
  let lastHex = null;

  for (let char of text) {
    if (char === ' ') {
      result += ' ';
      continue;
    }

    const t = colorIndex / Math.max(Math.ceil(chars.length / step) - 1, 1);
    const seg = Math.min(Math.floor(t * (colors.length - 1)), colors.length - 2);
    const localT = (t - seg / (colors.length - 1)) * (colors.length - 1);

    const [r1,g1,b1] = hexToRgb(colors[seg]);
    const [r2,g2,b2] = hexToRgb(colors[seg+1]);

    const hex = `#${toHex(lerp(r1,r2,localT))}${toHex(lerp(g1,g2,localT))}${toHex(lerp(b1,b2,localT))}`;

    if (hex !== lastHex) {
      result += useBold ? `&${hex}&l${char}` : `&${hex}${char}`;
      lastHex = hex;
    } else {
      result += char;
    }

    count++;
    if (count % step === 0) colorIndex++;
  }

  output.value = result;
}
</script>

</body>
</html>
